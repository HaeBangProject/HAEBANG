<!doctype html>
<html lang="en">
<head th:insert="layout/default :: head"></th:insert></head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HAEBANG</title>
    <link rel="stylesheet" href="/css/detail.css">
</head>
<body>
<div th:insert="layout/default :: nav">
</div>

</div>
</body>
<script type="text/javascript" src="/js/detail.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    $(document).ready(function (){
        createLoadingImage();
        createLoadingImage();
        login_or_logout();
        getItemsByRoadAddress( /*[[${road_address}]]*/);
    })

    function getItemsByRoadAddress(roadAddress){
        $.ajax({
            type: "GET",
            url: "/api/apt/items?road_address="+roadAddress,
            headers: {"content-type": "application/json"},
            dataType: "json",
        })
            .done(function (response) {
                console.log(response);
                if(response.length){
                    document.body.appendChild( makeCardElement(response, false, true));
                }
                else{
                    alert("등록된 매물이 없습니다.");
                    window.location.href="/";
                }
            })
            .fail(function (jqXHR, textStatus, errorThrown) {
                alert("실패 : "+jqXHR.responseText);
            })
    }

    /*]]>*/
</script>

</html>